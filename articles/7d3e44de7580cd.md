---
title: "ログイン機能"
emoji: "🐈"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [rails]
published: true
---

# はじめに
今更感満載なのですが、本日これに一日費やしてしまい、
どれだけ理解せず進んできたか露呈したためこの記事にまとめていきたいと思います。

## 原因
まず、エラーについては`undefined method validatable?' for nil:NilClass`
というエラーで何のことかさっぱり。。
新規登録でもログインでもこのようなことが起こりました。

## 解決策
　これを解決するには、gemの中に隠れてあるdeviseの使用を読み解かなければならず
今の段階で解決するのは困難。。。。
　
　じゃあどうすればいいの？

これは`routes.rb`の中の記述が問題で
```
resources :users

devise_for :users
```

この２つの記述が混合したためしたため起こったエラー見たいです。
元々`devise`により裏でnewアクションを定義したりとrails上では見えないところで
新規登録やログインなどの処理を行っているみたいで何かの動作で`resources`の挙動と
被ってしまい、今回のエラーが起こってしまったそう。

## 最後に
deviseとresourcesは完全に理解するまでは一緒に使用しないようにしよう。。。

