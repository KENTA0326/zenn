---
title: "通知機能"
emoji: "🦔"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [rails]
published: false
---

# はじめに
　PFもいよいよ終盤に差し掛かってきたかなと思いますが、
まだまだ時間が足りず困惑している状況です。
とまあ冗談はさておき、今回はDMの数倍苦しめられている通知機能を実装していきたいと思います。

## ポリモーフィック関連
　ポリモーフィック関連は、1つのモデルが複数のモデルに属する場合に使用する関連付けです。
しかし、ポリモーフィック関連を用いるとそれぞれのテーブル間の参照整合性制約を定義することが出来なくなるというアンチパターンでもあるため
使用には十分注意が必要です。
:::details AIさんによると,,,
ポリモーフィック関連とは、オブジェクト指向プログラミングにおいて、1つのクラスが複数の異なる型として使用できる性質のことを指します。具体的には、親クラスやインターフェースなどの共通の型を持つ複数の子クラスがあり、この親クラスやインターフェースを使用する箇所では適切な子クラスを選択して利用することができるという特徴を持ちます。

ポリモーフィック関連を実現するためには、特殊な構文やキーワードを使わずに、継承や実装などの基本的なオブジェクト指向の概念を適切に利用します。親クラスやインターフェースを定義し、それを実装する子クラスを作成します。そして、適切な子クラスを選択して利用する際には、型チェックや型キャストなどを使用することで、ポリモーフィックな動作を実現します。

例えば、動物を表すAnimalという親クラスがあり、その子クラスとして犬を表すDogクラスと猫を表すCatクラスがある場合、Animal型の変数にDogクラスやCatクラスのインスタンスを代入することができます。そして、Animal型の変数を使用する箇所では、実際のインスタンスの型に応じて適切なメソッドが呼ばれるようになります。
:::

## 実装

モデルを作成します。
```
rails g model Notification user:references notifiable:references{polymorphic} read:boolean
```

referencesを指定すると、モデル同士の関連付けを行う場合に通常必要になるNOT NULL制約や、
外部キー制約といったオプションをマイグレーションファイルに自動的に設定します。



