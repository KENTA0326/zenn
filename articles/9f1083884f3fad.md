---
title: "ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³"
emoji: "ğŸ¤–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [rails]
published: true
---
# ã¯ã˜ã‚ã«
ã€€ä»Šæ—¥ã¯ç®¡ç†è€…å´ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹æ–¹æ³•ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚
ã€€
## å®Ÿè£…æ–¹æ³•
ã¾ãšã€ç®¡ç†è€…ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

```
rails g devise Admin
```

æ¬¡ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ãƒ¦ãƒ¼ã‚µãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚


```rb;db/seeds.rb
Admin.create!(
   email: 'admin@admin',
   password: 'testtest'
)
```
`rails db:seed`ã‚’å¿˜ã‚Œãšã«

ã“ã“ã§`rails c`ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚

```
~>Admin.all
(ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿)
~>exit
```
ç¶šã„ã¦viewã¨controllerã®ç·¨é›†ã‚’è¡Œã„ã¾ã™ã€‚
```
$rails g devise:views admins
$rails g devise:controllers admins
```

æ¬¡ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ç·¨é›†ã§ã™ã€‚
```
devise_for :admins, controllers: {
  sessions: 'admins/sessions'
}
```

ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒ˜ãƒƒãƒ€ãƒ¼ç”»é¢ã‚’è¿½åŠ ã—ã¾ã™ã€‚
```html:application.html.erb
<% if customer_signed_in? %>
 <li>
  <%= link_to "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ", destroy_user_session_path, method: :delete %>
 </li>
<% elsif admin_signed_in? %>
 <li>
  <%= link_to "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ", destroy_admin_session_path, method: :delete %>
 </li>
<% else %>
 <li>
  <%= link_to "æ–°è¦ç™»éŒ²", new_user_registration_path %>
 </li>
 <li>
  <%= link_to "ãƒ­ã‚°ã‚¤ãƒ³", new_user_session_path %>
 </li>
<% end %>

```

æœ€å¾Œã«ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®å¤‰ç•°å…ˆã‚’è¿½åŠ ã—ã¾ã™ã€‚
```
protected
  def after_sign_in_path_for(resource)
    admin_posts_path
  end

  def after_sign_out_path_for(resource)
    new_admin_session_path
  end
```

## çµ‚ã‚ã‚Šã«
ã€€è‡ªèº«ã®ãƒ¡ãƒ¢ç¨‹åº¦ã§ã™ãŒã€è‡³ã‚‰ã¬ç‚¹ã‚„ã“ã“ã‚ã‹ã‚‰ã‚“ã£ã¦ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã‚‰ã‚³ãƒ¡ãƒ³ãƒˆã§æ•™ãˆã¦ã„ãŸã ãã¨å¹¸ã„ã§ã™ã€‚